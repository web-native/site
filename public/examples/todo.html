<html>

    <head>

        <title>A TODO Example</title>
        <template name="items">
            
            <li root>
                <span scoped:id="desc"></span>
                <button scoped:id="remover">Remove</button>
                <script type="scoped">
                    this.idrefs.desc.innerHTML = desc;
                    this.idrefs.remover.addEventListener('click', () => this.remove());
                </script>
            </li>

        </template>

    </head>

    <body>

        <div root id="todo">

            <h2 scoped:id="title"></h2>
            <ol scoped:id="items" template="items"></ol>
            <button scoped:id="adder">Add</button>
            <br />
            <br />
            <div>Ypu can also add items from the console. Open your console and type: <code>todoItems.push({desc:"New Item"})</code></div>

            <script type="scoped">
                this.idrefs.title.innerHTML = title;
                $(this.idrefs.items).itemize(items, (el, data) => el.bind(data));
                this.idrefs.adder.addEventListener('click', () => addItem());
            </script>

        </div>

        <script src="//unpkg.com/@web-native-js/observer/dist/main.js"></script>
        <script src="//unpkg.com/@web-native-js/play-ui/dist/main.js"></script>
        <script src="//unpkg.com/@web-native-js/chtml/dist/main.js"></script>
        <script>
            // Declare our tools
            let Obs = window.WebNative.Observer;
            let $ = window.WebNative.PlayUI;

            // Create the app
            let todo = {
                $,
                title: 'My TODO',
                items: [
                    {desc: 'Task-1'},
                    {desc: 'Task-2'},
                    {desc: 'Task-3'},
                ],
                addItem() {
                    window.todoItems.push({desc: prompt('Task description'),});
                },
            };
            
            // Bind the app to the UI
            document.querySelector('#todo').bind(todo);

            // Make the items available globally
            // so that we can always manipulate them
            window.todoItems = Obs.proxy(todo.items);
        </script>
    </body>

</html>
